<div class="bg-white min-h-screen p-6">

    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">Order Management</h1>
        <p class="text-gray-600">Manage and track all customer orders</p>

    </div>
    <div class="mt-6 grid grid-cols-2 md:grid-cols-5 gap-4 pb-4">

        <div class="p-4 rounded-xl bg-yellow-50 border border-yellow-200 text-center">
            <p class="text-sm text-yellow-700 font-medium">Pending</p>
            <h2 class="text-2xl font-bold text-yellow-900 mt-1">
                {{ statusCounts.PendingPayment }}
            </h2>
            <p class="text-sm font-semibold text-yellow-800 mt-1">
                â‚¹{{ statusTotals.PendingPayment | number:'1.0-0' }}
            </p>
        </div>

        <div class="p-4 rounded-xl bg-blue-50 border border-blue-200 text-center">
            <p class="text-sm text-blue-700 font-medium">Paid, Not shipped</p>
            <h2 class="text-2xl font-bold text-blue-900 mt-1">
                {{ statusCounts.Paid }}
            </h2>
            <p class="text-sm font-semibold text-blue-800 mt-1">
                â‚¹{{ statusTotals.Paid | number:'1.0-0' }}
            </p>
        </div>

        <div class="p-4 rounded-xl bg-purple-50 border border-purple-200 text-center">
            <p class="text-sm text-purple-700 font-medium">Shipped</p>
            <h2 class="text-2xl font-bold text-purple-900 mt-1">
                {{ statusCounts.Shipped }}
            </h2>
            <p class="text-sm font-semibold text-purple-800 mt-1">
                â‚¹{{ statusTotals.Shipped | number:'1.0-0' }}
            </p>
        </div>

        <div class="p-4 rounded-xl bg-green-50 border border-green-200 text-center">
            <p class="text-sm text-green-700 font-medium">Delivered</p>
            <h2 class="text-2xl font-bold text-green-900 mt-1">
                {{ statusCounts.Delivered }}
            </h2>
            <p class="text-sm font-semibold text-green-800 mt-1">
                â‚¹{{ statusTotals.Delivered | number:'1.0-0' }}
            </p>
        </div>

        <div class="p-4 rounded-xl bg-red-50 border border-red-200 text-center">
            <p class="text-sm text-red-700 font-medium">Cancelled</p>
            <h2 class="text-2xl font-bold text-red-900 mt-1">
                {{ statusCounts.Cancelled }}
            </h2>
            <p class="text-sm font-semibold text-red-800 mt-1">
                â‚¹{{ statusTotals.Cancelled | number:'1.0-0' }}
            </p>
        </div>

    </div>

    <h1 class="text-3xl font-bold text-gray-900 mb-2">Orders</h1>


    <div *ngIf="isLoading" class="text-center py-12">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-black"></div>
        <p class="mt-4 text-gray-600">Loading orders...</p>
    </div>

    <div *ngFor="let order of filteredOrders"
        class="bg-white border border-gray-200 rounded-2xl p-4  hover:shadow-lg transition">

        <!-- TOP HEADER -->
        <div class="flex justify-between items-center mb-3">
            <div>
                <h3 class="font-semibold text-gray-800 text-sm">
                    Order #{{ order.orderId }}
                </h3>
                <p class="text-xs text-gray-500">
                    Placed on {{ order.orderDate }}
                </p>

                <p class="text-xs mt-1 text-gray-600">
                    ðŸ‘¤ <span class="font-medium">{{ order.userName }}</span>
                </p>
            </div>

            <!-- STATUS BADGE -->
            <span class="px-2 py-1 rounded-full text-xs font-semibold border capitalize"
                [ngClass]="getStatusColor(order.status)">
                {{ order.status }}
            </span>
        </div>

        <!-- ITEMS -->
        <div class="bg-gray-50 rounded-xl border p-3 mb-3">
            <div *ngFor="let item of order.items" class="flex justify-between items-center py-2 border-b last:border-0">

                <p class="text-[13px] font-medium text-gray-800">
                    {{ item.name || item.productName }}
                </p>
 <!-- AMOUNT -->
            <p class="text-lg font-bold text-gray-900">
                {{ order.totalAmount | currency:'INR' }}
            </p>
                <span class="text-xs text-gray-500">
                    Qty: {{ item.quantity || 1 }}
                </span>
            </div>
        </div>

        <!-- STATUS SELECT -->
        <div class="flex items-center gap-2">
            <select class="border px-3 py-1 rounded-lg text-sm text-gray-800" [value]="order.status"
                (change)="changeStatus(order, $any($event.target).value)">
                <option value="PendingPayment">Pending Payment</option>
                <option value="Paid">Paid</option>
                <option value="Shipped">Shipped</option>
                <option value="Delivered">Delivered</option>
                <option value="Cancelled">Cancelled</option>
            </select>

           

            <!-- VIEW -->
            <button (click)="viewOrderDetails(order)"
                class="bg-black text-white px-4 py-2 rounded-lg text-xs hover:bg-gray-800">
                View Details
            </button>
        </div>

    </div>


    <div *ngIf="selectedOrder" class="fixed inset-0 bg-black/40 flex justify-center items-center">
        <div class="bg-white text-black p-6 rounded-xl w-[500px] max-h-[80vh] overflow-y-auto">

            <h3 class="text-lg font-bold mb-4">
                Order #{{ selectedOrder.orderId }}
            </h3>

            <div *ngFor="let item of selectedOrder.items" class="flex gap-4 border-b py-3">
                <div>
                    <p class="font-semibold">{{ item.name }}</p>
                    <p>Color: {{ item.color }}</p>
                    <p>Qty: {{ item.quantity }}</p>
                    <p>â‚¹{{ item.price }}</p>
                </div>
            </div>

            <button class="mt-4 bg-black text-white px-4 py-2 rounded" (click)="closeOrderDetails()">
                Close
            </button>
        </div>
    </div>



</div>